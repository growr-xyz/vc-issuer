const { decodeJWT } = require('did-jwt')
const { parseVerifiableCredential } = require('@growr/vc-json-schemas-parser')

// const credentialVC = 'eyJhbGciOiJFUzI1NksiLCJ0eXAiOiJKV1QifQ.eyJ2YyI6eyJAY29udGV4dCI6WyJodHRwczovL3d3dy53My5vcmcvMjAxOC9jcmVkZW50aWFscy92MSJdLCJ0eXBlIjpbIlZlcmlmaWFibGVDcmVkZW50aWFsIiwiQ2l0aXplbnNoaXAiXSwiY3JlZGVudGlhbFNjaGVtYSI6eyJpZCI6ImRpZDpldGhyOnJzazoweDZhMzAzNWVjMzEzN2JlZWI2Nzg5ZmZhOTA4OThjY2FkNWNkMDZmNzk7aWQ9MjM3MzBhMWQtOGYyNS00YzZhLWI1MjctN2Y4YWQ5MDFlZWE5O3ZlcnNpb249MS4wIiwidHlwZSI6Ikpzb25TY2hlbWFWYWxpZGF0b3IyMDE4In0sImNyZWRlbnRpYWxTdWJqZWN0Ijp7IkNpdGl6ZW5zaGlwIjoiU1YifX0sInN1YiI6ImRpZDpldGhyOnJzazp0ZXN0bmV0OjB4ZjM5RmQ2ZTUxYWFkODhGNkY0Y2U2YUI4ODI3Mjc5Y2ZmRmI5MjI2NiIsIm5iZiI6MTY0OTM0Mjg2NiwiaXNzIjoiZGlkOmV0aHI6cnNrOjB4N0ZEYmIxQ0IzQzJlRDM1NzRDMDU4Njc5OWNDQjE0QkYxNzJBOUYxMiJ9.zXhuZIPfOZDoF-947UjfEupRMQZJSjDVNEk7wxMYHt5jyEzoo91m4Frx9pGROwar2iW4V9BN70CDT5E08Kh_GA'
const credentialVC = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NksifQ.eyJ2YyI6eyJAY29udGV4dCI6WyJodHRwczovL3d3dy53My5vcmcvMjAxOC9jcmVkZW50aWFscy92MSJdLCJ0eXBlIjpbIlZlcmlmaWFibGVDcmVkZW50aWFsIiwiRW1haWwiXSwiY3JlZGVudGlhbFNjaGVtYSI6eyJpZCI6ImRpZDpldGhyOnJzazoweDhhMzJkYTYyNGRkOWZhZDhiZjRmMzJkOTQ1NmYzNzRiNjBkOWFkMjg7aWQ9MWViMmFmNmItMGRlZS02MDkwLWNiNTUtMGVkMDkzZjliMDI2O3ZlcnNpb249MS4wIiwidHlwZSI6Ikpzb25TY2hlbWFWYWxpZGF0b3IyMDE4In0sImNyZWRlbnRpYWxTdWJqZWN0Ijp7ImVtYWlsQWRkcmVzcyI6Im1hZEBncm93ci54eXoifX0sInN1YiI6ImRpZDpldGhyOnJzazoweDZhMzAzNWVjMzEzN2JlZWI2Nzg5ZmZhOTA4OThjY2FkNWNkMDZmNzkiLCJuYmYiOjE2NDQ2NjMwNTQsImlzcyI6ImRpZDpldGhyOnJzazoweDRhOTk2Q0RGOTJhNGEyMDJiOTZDMDQ4NTNmODFjNzZBZWRDRDBkYmIifQ.4_UMOHn8mi4WlwIZaYyu6BCZmPdFdgfa4qxrBSpp51e_F85uUP5QEC2nq6h1YqoVgHJlClvUY739AcU9cULifA'

const decodedJWT = decodeJWT(credentialVC)
const parsedCredentialVC = parseVerifiableCredential('Email', decodedJWT.payload.vc)
console.log(JSON.stringify(parsedCredentialVC, null, 2))


